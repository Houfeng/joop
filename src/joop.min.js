/**
 * joop ver 0.5
 * @description OOP模块，为JS提供OOP机制，拥有完整的继承，多态，封装等面向对象特性。
 * @author      侯锋
 * @email       admin@xhou.net
 * @blog        http://www.houfeng.net
 * Copyright 2012 Houfeng
 * Dual licensed under the LGPL licenses.
 */

(function(a){a.$helper={trim:function(b){if(b&&b.trim){return b.trim();}else{return b.replace(/(^[\\s]*)|([\\s]*$)/g,"");}},isNull:function(b){return b==null;
},isFunction:function(b){return typeof b==="function";},isString:function(b){return typeof b==="string";},contains:function(c,b){return c.indexOf(b)>-1;
},isNumber:function(b){return typeof b==="number";},isElement:function(b){if(window.Element){return b instanceof Element;}else{return(b.tagName&&b.nodeType&&b.nodeName&&b.attributes&&b.ownerDocument);
}},isText:function(b){return b instanceof Text;},isObject:function(b){return typeof b==="object";},isArray:function(c){if(!c){return false;}var b=((c instanceof Array)||(!this.isString(c)&&c.length&&this.isNumber(c.length)));
return b;},each:function(d,c){if(!a.$helper.isFunction(c)){return d;}if(this.isArray(d)){for(var b=0;b<d.length;b++){if(c.call(d[b],b)){break;}}}else{for(var b in d){if(c.call(d[b],b)){break;
}}}return d;},throwError:function(b){}};a.$class=function(e){var d=function(){var k=this;if(k.$base){for(var g in k.$base){if(g!="$is"&&g!="$base"&&g!="$type"&&g!="$baseType"&&a.$helper.isFunction(k.$base[g])){var j=k.$base[g];
k.$base[g]=function(){return j.apply(k,arguments);};}}}k.$type=d;k.$is=function(i){return k.$type===i||k.$baseType===i||(k.$base!=null&&k.$base.$is!=null&&k.$base.$is(i));
};var f=null;if(k.$init&&a.$helper.isFunction(k.$init)){f=k.$init.apply(k,arguments);}if(k.$initList){for(var h in k.$initList){if(k.$initList[h]&&a.$helper.isFunction(k.$initList[h])){k.$initList[h].apply(k,arguments);
}}}return f;};var b=function(h,f,i){if(a.$helper.isFunction(h)&&!i){var j=new h();h=j;}if(!d.prototype.$initList){d.prototype.$initList=[];}for(var g in h){if(!f&&g=="$init"&&a.$helper.isFunction(h[g])){d.prototype.$initList.push(h[g]);
}else{d.prototype[g]=h[g];}}return d;};d.$extend=function(f,g){return b(f,false,g);};d.$static=function(g,h){if(a.$helper.isFunction(g)&&!h){var i=new g();
g=i;}for(var f in g){d[f]=g[f];if(f=="$init"&&a.$helper.isFunction(g[f])){d[f].apply(d);}}return d;};if(e.$base){var c=e.$base;e.$baseType=c;e.$base=new c();
d.$static(e.$baseType,true);d=b(e.$base,true);d=b(e,true);}else{d=b(e,true);}return d;};a.$event=function(e,b,d){var c=this;if(e&&a.$helper.isString(b)){c=e;
}if(b&&a.$helper.isString(e)){c=b;b=e;}if(!c._eventList){c._eventList={};}if(!c._eventList[b]){c._eventList[b]=[];c.addEventListener=c.addEventListener||function(g,h,f){if(c.attachEvent){c.attachEvent("on"+g,h);
}};c.removeEventListener=c.removeEventListener||function(g,h,f){if(c.detachEvent){c.detachEvent("on"+g,h);}};if(d==null&&d!=0){if(a.$helper.isArray(c)&&!a.$helper.isElement(c)){d=a.$event.bindType.child;
}else{d=a.$event.bindType.self;}}c._each=function(f,g){if(a.$helper.isArray(c)&&!a.$helper.isElement(c)&&a.$event.bindType.self!=g&&c[0]){a.$helper.each(c,f);
}return c;};if(c[b]){c["$"+b]=c[b];}c[b]=function(f,g){if(f&&a.$helper.isFunction(f)){c[b].bind(f,g);}else{c[b].tigger.apply(c[b],arguments);}return c;
};c[b].clear=function(){c._each(function(){a.$event(b,this).clear();},d);c._eventList[b]=[];return c;};c[b].has=function(g){var h=c._eventList[b];for(var f=0;
f<h.length;f++){if(h[f]==g){return true;}}};c[b].add=c[b].bind=function(f,g){c._each(function(){a.$event(b,this).add(f,g);},d);if(c[b].has(f)||a.$event.bindType.child==d){return c;
}f._src=g;c._eventList[b].push(f);if(c.addEventListener&&c.removeEventListener){f.$invoke=function(i){var h=f.apply(c,arguments);if(h===false){if(i.cancelBubble){i.cancelBubble=true;
}if(i.preventDefault){i.preventDefault();}if(i.stopPropagation){i.stopPropagation();}}};c.addEventListener(b,f.$invoke,false);}return c;};c[b].remove=c[b].unbind=function(g){c._each(function(){a.$event(b,this).remove(g);
},d);if(a.$event.bindType.child==d){return c;}if(c.addEventListener&&c.removeEventListener){c.removeEventListener(b,g.$invoke);}for(var f in c._eventList[b]){if(c._eventList[b][f]=g){c._eventList[b][f]=null;
}}return c;};c[b].tigger=c[b].fire=function(){var f=arguments;c._each(function(){a.$event(b,this).tigger.apply(this[b],f);},d);if(c["$"+b]){c["$"+b].apply(c,f);
return;}for(var g in c._eventList[b]){if(c._eventList[b][g]!=null){var h=c._eventList[b][g]._src;if(h==null){h=c;}if(h){c._eventList[b][g].apply(h,f);}}}return c;
};}return c[b];};a.$event.bindType={self:0,child:1,all:2};})((function(){var a=(typeof exports==="undefined")?window:exports;if(typeof define==="function"&&define.amd){define("joop",[],function(){return a;
});}return a;})());